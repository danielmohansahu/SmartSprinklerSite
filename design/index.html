<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Design &middot; SmartSprinkler
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/SmartSprinklerSite/public/css/poole.css">
  <link rel="stylesheet" href="/SmartSprinklerSite/public/css/syntax.css">
  <link rel="stylesheet" href="/SmartSprinklerSite/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/SmartSprinklerSite/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/SmartSprinklerSite/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>An elegant <a href="http://jekyllrb.com" target="_blank">solution</a> for a dangerous problem.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/SmartSprinklerSite/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/SmartSprinklerSite//about/">About</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item active" href="/SmartSprinklerSite//design/">Design</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/SmartSprinklerSite//media/">Media</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/SmartSprinklerSite//team/">Team</a>
        
      
    

    <span class="sidebar-nav-item">Currently v0.0.1</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2016. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/SmartSprinklerSite/" title="Home">SmartSprinkler</a>
            <small>the simple solution</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="page">
  <h1 class="page-title">Design</h1>
  <p>This page provides an overview of our design process. Significant project components are discussed below.</p>

<h2 id="the-eye-sensor">The Eye (Sensor)</h2>

<h3 id="making-a-cheap-infrared-camera">Making a Cheap Infrared Camera</h3>

<p>Infrared cameras easily pick up the intense radiation emitted by open flames. In addition, these cameras operate up to ranges large enough to cover a decent-sized room. Unfortunately though, commercially available infrared cameras can cost upwards of $1000, so we needed an alternative.</p>

<p>The solution was to remove the infrared filter from a cheap USB web camera. This filter (indicated by the red circle in the image below) blocks incoming infrared light to the camera’s sensor. By replacing the infrared filter with a visible light filter we were able to only allow infrared light to pass.</p>

<center><img src="/SmartSprinklerSite/public/webcam.jpg" height="60%" width="60%" align="middle" /></center>
<center><img src="/SmartSprinklerSite/public/stripped_webcam.jpg" height="60%" width="60%" align="middle" /></center>

<p>The following two images were both taken without the infrared blocking filter. The image on the right was taken with the addition of the visible light blocking filters. Both images are of a lighter taken at the same location.</p>

<center><img src="/SmartSprinklerSite/public/aaron_vis.jpg" height="60%" width="60%" align="middle" /></center>
<center><img src="/SmartSprinklerSite/public/aaron_ir_only.jpg" height="60%" width="60%" align="middle" /></center>

<p>Clearly, blocking visible light is necessary. Even though the fire is still the brightest thing in the picture on the left, the white objects, such as the PC in the background, could be a source of error in estimating the location of our flame. Knowing the location of the flame accurately allows us to douse the fire by rotating the camera until the centroid of white color (i.e. the center of the fire) is at the center of the image.</p>

<h3 id="ruling-out-an-infrared-thermometer">Ruling out an Infrared Thermometer</h3>

<p>We needed a sensor with a large enough field of view and range to cover the hemisphere encompassed by a room. Typical infrared, non-contact, temperature measuring devices within our price range are great for detecting fires, but only at a very short ranges (less than three feet for a small fire). In addition, while those sensors have a decent field of view, they function by averaging all of the temperatures within their field of view, so a small fire at a distance goes virtually undetected. The range limitations of this type of sensor ultimately caused us to rule it out.</p>

<center><img src="/SmartSprinklerSite/public/ir_thermometer.jpg" height="60%" width="60%" align="middle" /></center>

<h2 id="the-brain-single-board-computer">The Brain (Single Board Computer)</h2>

<p>Detecting the location of a flame in an image requires image processing, so we chose a single bosrd computer capable of doing so. We went with the <a href="https://www.raspberrypi.org/products/raspberry-pi-2-model-b/">Raspberry Pi 2B</a> because it lends itself well to the use of the OpenCV Python image processing libraries. These libraries include built in functions for capturing images, converting to black and white, and finding the centroid of an image. In addition, the 2B model has two hardware PWM units, which are useful for controlling servo motors.</p>

<center><img src="/SmartSprinklerSite/public/raspberry_pi.png" height="60%" width="60%" align="middle" /></center>

<h2 id="the-nervous-system-code">The Nervous System (Code)</h2>

<p>Our code is written in python. We don’t want to dive into the details of the code (<a href="https://github.com/ToniCvitanic/Smart-Sprinkler">feel free to check it out!</a>), but here’s a basic overview.</p>

<p>Our overall system begins in “Scanning” mode. In there it iterates through the room by rotating small amounts in both tilt and pan. On each rotation it takes a picture, and checks whether or not there is a flame. If there is, it goes into “Center Target” mode, which involves a feedback loop to get the flame within our sights. Once this is finished, the flame is extinguished via in “Spray” mode.</p>

<center><img src="/SmartSprinklerSite/public/flow_diagram.jpg" height="60%" width="60%" align="middle" /></center>

<h2 id="the-heart-power-source">The Heart (Power Source)</h2>

<p>The prototype built is entirely battery powered. We chose this for easy of implementation and demonstration. For a final product the sprinkler would draws its power from the building’s electrical system for normal operation as well as have a battery backup for operation in the event of loss of power to the building. This would allow for long term and uninterrupted monitoring for fires.</p>

<center><img src="/SmartSprinklerSite/public/power_source.jpg" height="60%" width="60%" align="middle" /></center>

<h2 id="the-muscles-motors">The Muscles (Motors)</h2>
<p>(Yes, we’re done with the body metaphor.)</p>

<p>Servo motors were an easy choice when designing the turret. They allow for precise movement between known positions, which is exactly what we needed to scan for and target fires.</p>

<p>During the course of our design process we were forced to upgrade the servo motors to a more powerful version, as the initial weight and friction of our system was larger than anticipated.</p>

<center><img src="/SmartSprinklerSite/public/servo.jpg" height="60%" width="60%" align="middle" /></center>

<p>Have questions or suggestions? Please <a href="/SmartSprinklerSite/team">contact us</a>!</p>

</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
